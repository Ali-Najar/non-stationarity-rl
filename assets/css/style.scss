---
---

/* =======================
   Theme variables (SCSS)
   ======================= */
$bg-0: #0a0f1f;   // near-black with blue tint
$bg-1: #0f172a;   // slate-900
$bg-2: #111827;   // gray-900
$text-0: #e5e7eb; // gray-200
$text-1: #cbd5e1; // slate-300
$accent: #3b82f6; // blue-500
$accent-2: #06b6d4; // cyan-500
$card: #0b1328;   // darker card
$card-border: #1f2a44;
$ring: rgba(59,130,246,.45);
$shadow: 0 10px 30px rgba(2,6,23,.5);

/* CSS custom props (for mixed-unit math at runtime) */
:root {
  --bg-0: #{$bg-0};
  --bg-1: #{$bg-1};
  --bg-2: #{$bg-2};
  --text-0: #{$text-0};
  --text-1: #{$text-1};
  --accent: #{$accent};
  --accent-2: #{$accent-2};
  --card: #{$card};
  --card-border: #{$card-border};
  --ring: #{$ring};
  --shadow: #{$shadow};

  /* fluid font middles (avoid Sass calc warnings) */
  --creator-fluid: calc(.9rem + 1.2vw);
  --title-fluid:   calc(1rem + 4vw);
  --section-fluid: calc(.8rem + 1.6vw);
}

/* -------- Global resets / guards -------- */
*,
*::before,
*::after { box-sizing: border-box; }

html {
  scroll-behavior: smooth;
  scrollbar-width: thin; /* Firefox (can be overridden/hid below) */
  scrollbar-color: rgba(148,163,184,.35) transparent;
  /* match body so overscroll never reveals white */
  background: linear-gradient(180deg, var(--bg-0), var(--bg-1)) fixed !important;
  background-color: var(--bg-0) !important;
  overscroll-behavior-y: none;
}

html, body { margin: 0 !important; min-height: 100%; }

body {
  overflow-x: hidden;
  overscroll-behavior-y: none;
  background: linear-gradient(180deg, var(--bg-0), var(--bg-1)) !important;
  color: var(--text-0) !important;
  line-height: 1.7;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue",
    Arial, "Noto Sans", "Liberation Sans", "Apple Color Emoji", "Segoe UI Emoji",
    "Segoe UI Symbol", sans-serif;
}

/* Remove Cayman skip link completely */
body > a#skip-to-content,
body > a.skip-to-content,
body > a.skip-link,
body > a.screen-reader-shortcut,
body > a[href="#content"] {
  display: none !important;
  visibility: hidden !important;
  position: absolute !important;
  width: 0 !important; height: 0 !important;
  overflow: hidden !important;
  pointer-events: none !important;
  opacity: 0 !important;
}

/* Keep wrappers transparent so hero canvas shows through */
.main-content,
.main-content .wrapper,
.page-header,
.site-footer { background: transparent !important; }

.wrapper, main { position: relative; z-index: 1; } /* layer above bg */

/* Header adjustments for Cayman */
.page-header { display: none !important; }
.project-name, .project-tagline { color: var(--text-0) !important; }

/* Force light text */
h1, h2, h3, h4, h5, h6, p, li, td, th, a, .btn { color: var(--text-0) !important; }

/* Centered headings */
h1, h2, h3, .title-xl, .section-title { text-align: center; }

/* Media guard */
img, video, canvas, iframe, object { max-width: 100%; display: block; }

/* Links */
a { color: var(--accent) !important; }
a:hover { color: var(--accent-2) !important; }

/* Cards */
.card {
  background: var(--card) !important;
  border: 1px solid var(--card-border) !important;
  border-radius: 14px;
  box-shadow: var(--shadow);
  color: var(--text-1);
}

/* ---------- Snap layout & comfy spacing ---------- */
section, header.hero{ margin:0; }
section, header.hero, main, .container, .prose{ width:100%; }

.container{ max-width: 920px; margin-inline:auto; padding-inline:1rem; }

.snap{ scroll-snap-type:y proximity; } /* gentler on desktop */
@media (pointer: coarse) and (prefers-reduced-motion: no-preference){
  .snap{ scroll-snap-type:y mandatory; }
}
.snap-section{
  scroll-snap-align:start;
  scroll-snap-stop:always;
  min-height:100vh;
  min-height:100svh;
  display:grid;
  place-items:center;
  padding-block:3.5rem;
}

/* -------------------- Hero (earlier handoff; seamless) -------------------- */
/* Base hero: transparent (body provides continuous bg), use overlays */
.hero {
  position: relative;
  overflow: hidden;
  text-align: center;
  padding: 4rem 1rem 5svh;            /* less bottom pad → creators shows sooner */
  margin: 2rem 0 0;
  border-radius: 1rem 1rem 0 0;       /* no bottom radius to avoid seam */
  background: transparent;            /* body gradient is the base */
  box-shadow: none;
  min-height: 112svh !important;      /* slightly taller than 1 screen */
  transform: translateZ(0);           /* avoid subpixel seams */
}

/* Glow overlay (no base linear-gradient; keep it on body) */
.hero::before{
  content:"";
  position:absolute; inset:-1px;      /* -1px guards against side/top hairlines */
  z-index:0; pointer-events:none;
  background:
    radial-gradient(1200px 400px at 50% -10%, rgba(59,130,246,.15), transparent 60%),
    radial-gradient(800px 300px at 80% 0%, rgba(6,182,212,.12), transparent 60%);
  transform: translateZ(0);
}

/* Bottom surface fade overlay (shorter = sooner finish) */
.hero::after{
  content:"";
  position:absolute; left:-1px; right:-1px; bottom:-1px;
  height: 22svh;                      /* shorter fade → ends sooner */
  z-index:0; pointer-events:none;
  /* If you want a surface fade again, uncomment and tweak colors:
  background: linear-gradient(
    to bottom,
    rgba(10,15,31,0) 0%,
    rgba(10,15,31,.28) 36%,
    rgba(10,15,31,.60) 72%,
    var(--bg-1) 100%
  );
  */
  transform: translateZ(0);
}

/* Neural canvas fades earlier (starts dissolving higher up) */
.hero-canvas{
  position:absolute; inset:0;
  width:100%; height:100%;
  z-index:1; pointer-events:none;
  opacity:.45; filter:none;
  -webkit-mask-image: linear-gradient(to bottom,
      rgba(0,0,0,1) 38%,
      rgba(0,0,0,0) 100%);
          mask-image: linear-gradient(to bottom,
      rgba(0,0,0,1) 38%,
      rgba(0,0,0,0) 100%);
  transform: translateZ(0);
}
.hero-content{ position:relative; z-index:2; }

/* Buttons */
.btn{
  display:inline-block; padding:.8rem 1.2rem; border-radius:.75rem;
  background:linear-gradient(135deg, var(--accent), var(--accent-2));
  color:#0a0f1f; text-decoration:none; font-weight:700;
  box-shadow:0 6px 20px rgba(59,130,246,.35);
}
.btn:hover{ filter:brightness(1.1); box-shadow:0 8px 26px rgba(6,182,212,.35); }

/* Creators (closer to hero, subtle top fade overlap) */
#creators{
  position: relative;
  transform: translateZ(0);
}
#creators.snap-section{
  padding-top: .75rem !important;     /* closer to hero */
}
#creators::before{
  content:"";
  position:absolute; left:0; right:0; top:-6px;  /* tiny overlap kills hairline */
  height: 12svh;                                  /* shorter fade on next section */
  pointer-events:none;
  background: linear-gradient(
    to bottom,
    var(--bg-0) 0%,
    rgba(15,23,42,0) 100%
  );
}

/* Avatars and names */
.creators { display:flex; justify-content:center; gap:1.5rem; margin-top:1.25rem; }
.avatar{
  width:clamp(96px, 12vw, 148px);
  height:clamp(96px, 12vw, 148px);
  border-radius:50%;
  background:#0b1328 center/cover no-repeat;
  border:2px solid var(--card-border);
  box-shadow:0 8px 22px rgba(0,0,0,.3);
}
.avatar:hover{ box-shadow:0 10px 28px rgba(0,0,0,.4), 0 0 0 6px var(--ring); }

.creator-names{
  text-align:center; margin-top:.8rem; opacity:.95; font-weight:800; letter-spacing:.2px;
  font-size: clamp(1.1rem, var(--creator-fluid), 1.7rem);
}

/* Content text margins (“prose”) — narrower column */
.prose{
  max-width: 640px !important;
  margin-inline: auto;
  padding-inline: 1.75rem !important;
}
.prose > * + * { margin-top: 1rem; }
.prose h3 { margin-top: 1.5rem; }

/* Post hero */
.post-hero{
  padding:1.25rem 1rem; border-left:6px solid var(--accent);
  background:rgba(17,24,39,.6); border-radius:.75rem; margin:1rem 0 2rem;
}

/* TOC */
.toc{
  background:rgba(59,130,246,.08);
  border:1px solid rgba(59,130,246,.25);
  padding:1rem; border-radius:.75rem;
  ol{ margin:0; }
}

/* Figures */
.figure, figure{ margin:1.25rem 0; text-align:center; }
.figure img, figure img{ border-radius:.5rem; box-shadow:0 10px 24px rgba(0,0,0,.28); }
.caption{ font-size:.9rem; color:#9aa4b2; margin-top:.5rem; }

/* Notes */
.note{ background:rgba(14,165,233,.12); border-left:4px solid var(--accent-2); padding:.75rem 1rem; border-radius:.5rem; }

/* Tables */
table{ width:100%; border-collapse:collapse; margin:1rem 0; }
th,td{ padding:.6rem .5rem; border-bottom:1px solid rgba(148,163,184,.2); }
th{ text-align:left; background:rgba(30,41,59,.6); color:#fff; }

/* Footer text */
.site-footer-owner, .site-footer-credits{ color: var(--text-1); }

/* ---------- Reveal fade (smooth, replayable) ---------- */
.reveal{
  opacity:0;
  transform:translate3d(0,22px,0);
  transition:opacity .45s ease, transform .45s cubic-bezier(.22,.61,.36,1);
  will-change:opacity, transform;
  contain:paint;
}
.reveal.revealed{ opacity:1; transform:translate3d(0,0,0); }

/* Typography scale (CSS calc via vars; Sass-safe) */
.title-xl      { font-size: clamp(2.2rem, var(--title-fluid),   4.2rem); }
.section-title { font-size: clamp(1.4rem, var(--section-fluid),  2rem); }

/* ---------- Poster clickable preview + circular loader ---------- */
.poster-click{
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  gap: .6rem;
}

.poster-img{
  max-width: min(1100px, 60vw);
  width: 30%;
  display:block;
  margin:0 auto;
  border-radius: 14px;
  border: 1px solid var(--card-border);
  background: #fff;    /* prevents "invisible" look on dark bg while loading */
  box-shadow: var(--shadow);
  opacity: 0;          /* fade in when ready */
  transition: opacity .28s ease-out;
}
.poster-img.is-ready{ opacity: 1; }

.poster-hint{
  font-size: .92rem;
  opacity: .85;
}

/* Loader overlay */
.poster-loader{
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  gap: .65rem;
  border-radius: 14px;
  border: 1px solid var(--card-border);
  background: linear-gradient(180deg, rgba(10,15,31,.65), rgba(10,15,31,.55));
  backdrop-filter: blur(2px);
  -webkit-backdrop-filter: blur(2px);
  transition: opacity .22s ease;
  z-index: 2;
}
.poster-loader.is-done{
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
}

/* Circular spinner */
.spinner{
  width: 56px;
  height: 56px;
  border-radius: 50%;
  border: 4px solid rgba(148,163,184,.25);
  border-top-color: rgba(148,163,184,.9);
  animation: spin .9s linear infinite;
}
@keyframes spin{
  to { transform: rotate(360deg); }
}

.loader-text{
  font-size: .95rem;
  color: var(--text-1);
  letter-spacing: .2px;
}

/* ---------- Cross-browser scrollbar styling (hidden) ---------- */
html, body { scrollbar-width: none !important; }      /* Firefox */
body { -ms-overflow-style: none; }                    /* Old IE/Edge */
body::-webkit-scrollbar { width: 0 !important; height: 0 !important; } /* Chrome/Safari/Edge */
body::-webkit-scrollbar-thumb { background: transparent !important; }
body::-webkit-scrollbar-track { background: transparent !important; }

/* -------- Extra clamps to kill horizontal overflow -------- */
html, body{ max-width:100%; overflow-x: clip; }
.hero, .container, .prose{ max-width:100%; }
/* Catch rogue 100vw usage */
*[style*="100vw"]{ width:100% !important; }
