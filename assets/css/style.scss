---
---

/* =======================
   Theme variables (SCSS)
   ======================= */
$bg-0: #0a0f1f;   // near-black with blue tint
$bg-1: #0f172a;   // slate-900
$bg-2: #111827;   // gray-900
$text-0: #e5e7eb; // gray-200
$text-1: #cbd5e1; // slate-300
$accent: #3b82f6; // blue-500
$accent-2: #06b6d4; // cyan-500
$card: #0b1328;   // darker card
$card-border: #1f2a44;
$ring: rgba(59,130,246,.45);
$shadow: 0 10px 30px rgba(2,6,23,.5);

/* CSS custom props (optional for runtime tweaking) */
:root {
  --bg-0: #{$bg-0};
  --bg-1: #{$bg-1};
  --bg-2: #{$bg-2};
  --text-0: #{$text-0};
  --text-1: #{$text-1};
  --accent: #{$accent};
  --accent-2: #{$accent-2};
  --card: #{$card};
  --card-border: #{$card-border};
  --ring: #{$ring};
  --shadow: #{$shadow};
}

/* -------- Global resets / guards -------- */
*,
*::before,
*::after { box-sizing: border-box; }

html {
  scroll-behavior: smooth;
  scrollbar-width: thin; /* Firefox */
  scrollbar-color: rgba(148,163,184,.35) transparent;
}

body {
  overflow-x: hidden;                      /* kill horizontal scroll */
  overscroll-behavior-y: none;             /* reduce rubber-banding jank */
  background: linear-gradient(180deg, var(--bg-0), var(--bg-1)) !important;
  color: var(--text-0) !important;
  line-height: 1.7;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue",
    Arial, "Noto Sans", "Liberation Sans", "Apple Color Emoji", "Segoe UI Emoji",
    "Segoe UI Symbol", sans-serif;
}

/* Nuke Cayman skip link completely (even when focused) */
body > a#skip-to-content,
body > a.skip-to-content,
body > a.skip-link,
body > a.screen-reader-shortcut,
body > a[href="#content"] {
  display: none !important;
  visibility: hidden !important;
  position: absolute !important;
  width: 0 !important; height: 0 !important;
  overflow: hidden !important;
  pointer-events: none !important;
  opacity: 0 !important;
}

/* Keep wrappers transparent so hero canvas shows through */
.main-content,
.main-content .wrapper,
.page-header,
.site-footer { background: transparent !important; }

/* Layering: put page content above backgrounds */
.wrapper, main { position: relative; z-index: 1; }

/* Header adjustments for Cayman */
.page-header { display: none !important; }
.project-name, .project-tagline { color: var(--text-0) !important; }

/* Force all text light */
h1, h2, h3, h4, h5, h6, p, li, td, th, a, .btn { color: var(--text-0) !important; }

/* Headings centered */
h1, h2, h3, .title-xl, .section-title { text-align: center; }

/* Media guard */
img, video, canvas, iframe, object { max-width: 100%; display: block; }

/* Links */
a {
  color: var(--accent) !important;
  &:hover { color: var(--accent-2) !important; }
}

/* Cards keep their own dark surface */
.card {
  background: var(--card) !important;
  border: 1px solid var(--card-border) !important;
  border-radius: 14px;
  box-shadow: var(--shadow);
  color: var(--text-1);
}

/* -------------------- Hero -------------------- */
.hero {
  position: relative;       /* needed for hero-only canvas */
  overflow: hidden;         /* clip the canvas */
  text-align: center;
  padding: 4rem 1rem 10svh; /* extra bottom pad for nicer fade into creators */
  background:
    radial-gradient(1200px 400px at 50% -10%, rgba(59,130,246,.15), transparent 60%),
    radial-gradient(800px 300px at 80% 0%, rgba(6,182,212,.12), transparent 60%),
    linear-gradient(180deg, var(--bg-0), var(--bg-2));
  color: #fff;
  border-radius: 1rem;
  margin: 2rem 0;
  box-shadow: var(--shadow);
  min-height: 115svh;       /* << taller hero so the background carries into next section */
}

.hero-canvas {
  position: absolute;
  inset: 0;
  width: 100%; height: 100%;
  z-index: 0;
  pointer-events: none;
  opacity: .45;             /* lighter for perf */
  filter: none;             /* avoid extra compositing */
}
.hero-content { position: relative; z-index: 1; }

/* Buttons */
.btn {
  display: inline-block; padding: .8rem 1.2rem; border-radius: .75rem;
  background: linear-gradient(135deg, var(--accent), var(--accent-2));
  color: #0a0f1f; text-decoration: none; font-weight: 700;
  box-shadow: 0 6px 20px rgba(59,130,246,.35);
  &:hover { filter: brightness(1.1); box-shadow: 0 8px 26px rgba(6,182,212,.35); }
}

/* Creators (bigger) */
.creators { display: flex; justify-content: center; gap: 1.5rem; margin-top: 1.25rem; }
.avatar {
  width: clamp(96px, 12vw, 148px);
  height: clamp(96px, 12vw, 148px);
  border-radius: 50%;
  background: #0b1328 center/cover no-repeat;
  border: 2px solid var(--card-border);
  box-shadow: 0 8px 22px rgba(0,0,0,.3);
  &:hover { box-shadow: 0 10px 28px rgba(0,0,0,.4), 0 0 0 6px var(--ring); }
}
.creator-names {
  text-align: center; margin-top: .8rem; opacity: .95; font-weight: 800;
  letter-spacing: .2px;
  font-size: clamp(1.1rem, unquote("calc(.9rem + 1.2vw)"), 1.7rem); /* Ruby Sass-safe */
}

/* Content text margins (“prose”) */
.prose {
  max-width: 800px; width: 100%;
  margin-inline: auto;
  padding-inline: 1.25rem;  /* << more side margin */
}
.prose > * + * { margin-top: 1rem; }
.prose h3 { margin-top: 1.5rem; }

/* Post hero */
.post-hero {
  padding: 1.25rem 1rem; border-left: 6px solid var(--accent);
  background: rgba(17,24,39,.6); border-radius: .75rem; margin: 1rem 0 2rem;
}

/* TOC */
.toc {
  background: rgba(59,130,246,.08);
  border: 1px solid rgba(59,130,246,.25);
  padding: 1rem; border-radius: .75rem;
  ol { margin: 0; }
}

/* Figures */
.figure, figure { margin: 1.25rem 0; text-align: center; }
.figure img, figure img { border-radius: .5rem; box-shadow: 0 10px 24px rgba(0,0,0,.28); }
.caption { font-size: .9rem; color: #9aa4b2; margin-top: .5rem; }

/* Two-column gallery */
.grid-2 { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 1rem; }

/* Notes */
.note { background: rgba(14,165,233,.12); border-left: 4px solid var(--accent-2); padding: .75rem 1rem; border-radius: .5rem; }

/* Tables */
table { width: 100%; border-collapse: collapse; margin: 1rem 0; }
th, td { padding: .6rem .5rem; border-bottom: 1px solid rgba(148,163,184,.2); }
th { text-align: left; background: rgba(30,41,59,.6); color: #fff; }

/* Footer text */
.site-footer-owner, .site-footer-credits { color: var(--text-1); }

/* ---------- Reveal fade (replayable, smooth) ---------- */
.reveal {
  opacity: 0;
  transform: translate3d(0, 22px, 0);             /* GPU-friendly */
  transition: opacity .45s ease, transform .45s cubic-bezier(.22,.61,.36,1);
  will-change: opacity, transform;
  contain: paint;                                  /* smoother during scroll */
}
.reveal.revealed { opacity: 1; transform: translate3d(0, 0, 0); }

/* Typography scale (Ruby Sass-safe clamp) */
.title-xl { font-size: clamp(2.2rem, unquote("calc(1rem + 4vw)"), 4.2rem); }
.section-title { font-size: clamp(1.4rem, unquote("calc(.8rem + 1.6vw)"), 2rem); }

/* ---------- Snap layout & comfy section spacing ---------- */
section, header.hero { margin: 0; }
section, header.hero, main, .container, .prose { width: 100%; }

.container { max-width: 920px; margin-inline: auto; padding-inline: 1rem; }
.snap { scroll-snap-type: y proximity; } /* gentler on desktop */
@media (pointer: coarse) and (prefers-reduced-motion: no-preference) {
  .snap { scroll-snap-type: y mandatory; }
}
.snap-section {
  scroll-snap-align: start;
  scroll-snap-stop: always;
  min-height: 100vh;
  min-height: 100svh;
  display: grid;
  place-items: center;
  padding-block: 3.5rem; /* a touch more breathing room */
}

/* Make the hero truly full-screen (now a bit taller) */
.hero { /* min-height above */ }
.hero .subtitle { display: none !important; }

/* Poster frame: slightly smaller height */
.poster-frame {
  width: 100%;
  height: min(70vh, 820px);  /* << smaller than before */
  border: 1px solid var(--card-border);
  border-radius: 14px;
  overflow: hidden;
  box-shadow: var(--shadow);
  background: #fff;
}
.poster-embed { width: 100%; height: 100%; background: #fff; border: 0; }

/* Canvas style if using PDF.js render (no viewer chrome) */
.poster-canvas { width: 100%; height: auto; display: block; }

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  * { transition: none !important; }
  .reveal, .reveal.revealed { transform: none !important; }
  .snap { scroll-snap-type: none; }
}

/* ---------- Cross-browser scrollbar styling ---------- */
/* Chrome/Edge/Brave/Opera/Safari */
::-webkit-scrollbar { width: 10px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb {
  background: rgba(148,163,184,.35);
  border-radius: 12px;
  border: 2px solid transparent;
  background-clip: padding-box;
}
::-webkit-scrollbar-thumb:hover { background: rgba(148,163,184,.5); }

/* -------- Extra clamps to kill horizontal overflow -------- */
html, body { max-width: 100%; overflow-x: hidden; }
main.snap { overflow-x: clip; } /* stricter than hidden */
.hero, .container, .prose, .poster-frame, .poster-embed { max-width: 100%; }
object.poster-embed, iframe.poster-embed { display: block; width: 100%; max-width: 100%; overflow: hidden; }
/* Catch rogue 100vw usage */
*[style*="100vw"] { width: 100% !important; }
